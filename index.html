/* ========================================= */
/* 1. ÂÖ®Â±ÄË®≠ÂÆöËàáËÆäÊï∏ (Global Settings)       */
/* ========================================= */

/* ÂºïÂÖ•Â≠óÈ´îÁ≥ªÁµ±ÔºöZen Old Mincho (Ë•ØÁ∑ö) & Noto Sans JP (ÁÑ°Ë•ØÁ∑ö) */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500&family=Shippori+Mincho:wght@400;500;700&family=Zen+Old+Mincho:wght@400;700;900&display=swap');

:root {
    /* --- COLOR SYSTEM (Source: Code B) --- */
    --color-bg-paper:        #F6EDE1; /* Torinoko paper */
    --color-bg-paper-aged:   #E9E5DA; /* Card background */
    --color-bg-paper-pure:   #FFFFFF; /* Added from Code A for Focus states */
    
    --color-text-primary:    #2B2B2B; /* Charcoal */
    --color-text-secondary:  #554B3F; /* Diluted ink */
    --color-text-disabled:   #7D6C5F; /* Renamed from Code A's --ink-disabled */
    
    --color-accent-cinnabar: #E34234; /* Vermilion Red */
    --color-accent-brass:    #CD9575; /* Antique Brass */
    --color-border:          #DDCFC5; /* Subtle dividers */

    /* --- TYPOGRAPHY (Source: Code B - Golden Ratio) --- */
    --font-serif:   'Zen Old Mincho', 'Shippori Mincho', 'Times New Roman', serif;
    --font-sans:    'Noto Sans JP', sans-serif;
    
    --text-display: 6.854rem; /* ~110px */
    --text-h1:      4.236rem; /* ~68px */
    --text-h2:      2.618rem; /* ~42px */
    --text-h3:      1.618rem; /* ~26px */
    --text-body:    1.000rem; /* 16px */
    --text-caption: 0.800rem; /* 12.8px */

    /* --- SPACING (Source: Code B - 8pt Grid) --- */
    --space-unit: 8px;
    --space-xs:   0.5rem;
    --space-s:    1.0rem;
    --space-m:    1.5rem;
    --space-l:    2.0rem;
    --space-xl:   3.0rem;
    --space-2xl:  4.0rem;
    --space-3xl:  6.0rem;
    --space-ma:   8.0rem; /* 128px ÁïôÁôΩÂ∞àÁî® */

    /* --- UI TOKENS --- */
    --border-radius: 4px; /* From Code A, aligns with Minimalist style */
}

/* Âü∫Á§éË®≠ÂÆöÈáçÁΩÆ */
body {
    font-family: var(--font-sans);
    color: var(--color-text-primary);
    background-color: var(--color-bg-paper);
    line-height: 1.75;
    
    /* Texture & Structure (From Code A) */
    background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.08"/></svg>');
    overflow-x: hidden;
    min-height: 100vh;
    padding-bottom: 120px;
}

/* ========================================= */
/* 2. ÊéíÁâàÁ≥ªÁµ± (Typography)                  */
/* Source: Code B Wins                       */
/* ========================================= */

h1, h2, h3, .en-title {
    font-family: var(--font-serif);
    color: var(--color-text-primary);
    font-weight: 500; /* Code B uses 500 */
    line-height: 1.1;
    letter-spacing: -0.02em; /* Code B style */
}

/* Code A Specific Overrides mapped to Code B Variables */
h1.text-2xl { 
    /* Code A wanted 2.618rem, which matches Code B's H2 variable */
    font-size: var(--text-h2) !important; 
    line-height: 1.2;
    letter-spacing: 0.05em; /* Keep A's spacing for this specific element */
}

h3.text-lg {
    font-size: 1.2rem !important;
    letter-spacing: 0.1em;
}

.price-value {
    font-family: var(--font-serif);
    font-weight: 400;
    color: var(--color-text-primary);
}

.gold-highlight {
    color: var(--color-accent-cinnabar) !important;
    -webkit-text-fill-color: var(--color-accent-cinnabar) !important; 
    font-weight: 700;
}

/* ========================================= */
/* 3. üõ°Ô∏è Èò≤Á¶¶ÊÄß‰ΩàÂ±ÄÂºïÊìé (Defensive Layout)   */
/* Source: Code A (Structure preserved)      */
/* ========================================= */

main#layout-container {
    display: flex !important;
    flex-direction: column !important;
    justify-content: flex-start !important;
    align-items: center !important;
    gap: var(--space-2xl) !important; /* Mapped 4rem to var */
    width: 90% !important;
    max-width: 500px !important;
    margin: var(--space-2xl) auto !important;
    position: relative !important;
    z-index: 10;
}

.layout-block {
    position: relative !important;
    width: 100% !important;
    display: block !important;
    flex-shrink: 0 !important;
    margin-bottom: var(--space-m) !important;
}

/* Ë£ùÈ£æÊÄßËÉåÊôØÂ±§ (Mountain Layer) */
.mountain-layer {
    background: linear-gradient(to top, var(--color-bg-paper-aged), transparent);
    opacity: 0.5;
}

/* ========================================= */
/* 4. ÂÖÉ‰ª∂Ê®£Âºè (Components)                  */
/* ========================================= */

/* --- Cards (.xuan-card) --- */
.xuan-card {
    background: rgba(233, 229, 218, 0.6); /* Hex #E9E5DA (paper-aged) with opacity */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--color-border);
    box-shadow: 
        0 4px 6px -1px rgba(43, 43, 43, 0.05), 
        0 10px 15px -3px rgba(43, 43, 43, 0.05);
    border-radius: 2px;
    padding: 2.5rem;
    transition: all 0.4s ease;
}

.xuan-card:focus-within {
    background: var(--color-bg-paper-pure);
    border-color: var(--color-accent-brass);
    box-shadow: 0 20px 40px -10px rgba(205, 149, 117, 0.15);
}

/* --- Inputs & Forms --- */
label {
    font-family: var(--font-serif);
    color: var(--color-text-secondary);
    font-size: 0.85rem;
    letter-spacing: 0.15em;
    margin-bottom: var(--space-xs);
}

input {
    font-family: var(--font-serif);
    color: var(--color-text-primary);
    background: transparent;
    border: none;
    border-bottom: 1px solid var(--color-border);
    border-radius: 0;
    padding: var(--space-xs) 0;
    font-size: var(--text-h3); /* Mapped 1.618rem to var */
    transition: all 0.3s ease;
}

input:focus {
    outline: none;
    border-bottom-color: var(--color-accent-brass);
    color: var(--color-accent-brass);
}

input::placeholder {
    color: var(--color-text-disabled);
    opacity: 0.3;
}

/* Range Slider Customization */
input[type=range]::-webkit-slider-thumb {
    background: var(--color-accent-cinnabar);
    border: 2px solid var(--color-bg-paper);
}

/* --- Buttons --- */
/* Merging generic button (A) with .button-primary logic (B) */
button, .button-primary {
    background-color: var(--color-text-primary) !important; /* Default to primary ink */
    color: #FFFFFF;
    transition: all 0.3s ease;
    /* Code B's padding/radius logic applied if needed, but keeping A's layout context */
}

button:hover {
    background-color: var(--color-accent-cinnabar) !important;
    transform: translateY(-2px);
}

/* ========================================= */
/* 5. ÂäüËÉΩÊÄßÊ®°ÁµÑ (Utilities / Functionality) */
/* ========================================= */

/* ÂÅ¥ÈÇäÊ¨Ñ (Settings Drawer) */
#settings-drawer .bg-\[\#f4f1ea\] {
    background-color: var(--color-bg-paper-aged) !important;
    border-left: 1px solid var(--color-border);
}

/* ÂàóÂç∞Ê®°Âºè‰øÆÊ≠£ (Print Mode) */
.receipt-mode body { background: #fff !important; }
.receipt-mode .xuan-card { border: none; box-shadow: none; background: transparent; }

/* Tailwind Helpers Overrides (If needed for JS interaction) */
.bg-\[var\(--cinnabar\)\] { background-color: var(--color-accent-cinnabar); }
.text-\[var\(--ink-primary\)\] { color: var(--color-text-primary); }
