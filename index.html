<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å±±æ°´è—å»Š Â· å ±åƒ¹ç³»çµ±</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3593/3593444.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;900&display=swap" rel="stylesheet">
    
    <style>
        body { 
            font-family: 'Noto Serif TC', serif;
            background-color: #f4f1ea; /* å®£ç´™åº•è‰² */
            color: #2c3e50;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* å±±æ°´é›²éœ§èƒŒæ™¯ */
        .landscape-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: 
                radial-gradient(circle at 50% 10%, #fff 0%, transparent 50%), /* é è™•é›²éœ§ */
                linear-gradient(to bottom, #f4f1ea 0%, transparent 40%, rgba(189,195,199,0.3) 100%);
        }

        /* é å±±å‰ªå½± */
        .mountain {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 40vh;
            background: url('https://www.transparenttextures.com/patterns/natural-paper.png');
            clip-path: polygon(0% 100%, 15% 40%, 35% 80%, 55% 20%, 75% 60%, 100% 30%, 100% 100%);
            background-color: #7f8c8d;
            opacity: 0.15;
            z-index: -1;
            filter: blur(2px);
            animation: cloud-float 20s infinite alternate ease-in-out;
        }

        @keyframes cloud-float {
            0% { transform: translateY(0); }
            100% { transform: translateY(20px); }
        }

        /* å®£ç´™å¡ç‰‡æ„Ÿ */
        .xuan-paper {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.05);
            box-shadow: 20px 20px 60px #d9d6ce, -20px -20px 60px #ffffff;
            border-radius: 1.5rem;
        }

        /* è¼¸å…¥æ¡†å¾®èª¿ */
        input {
            background: transparent !important;
            border-bottom: 1px solid #bdc3c7 !important;
            border-radius: 0 !important;
            color: #2c3e50 !important;
            font-weight: 900;
        }
        input:focus { border-bottom-color: #8e44ad !important; }

        /* éš±è— Chrome é è¨­æ¨£å¼ */
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }

        /* å…¸é›…æ»‘è»Œ */
        .ink-range { -webkit-appearance: none; width: 100%; height: 2px; background: #bdc3c7; }
        .ink-range::-webkit-slider-thumb {
            -webkit-appearance: none; width: 18px; height: 18px; background: #2c3e50;
            border-radius: 50%; cursor: pointer; border: 2px solid #f4f1ea;
        }

        /* åˆ—å°/æ”¶æ“šæ¨¡å¼ */
        .receipt-mode { background: #fff !important; }
        .receipt-mode .landscape-bg, .receipt-mode .mountain, .receipt-mode .no-print { display: none !important; }
        .receipt-mode .print-only { display: block !important; }

        #settings-drawer { transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1); transform: translateX(100%); }
        #settings-drawer.open { transform: translateX(0); }

        .print-only { display: none; }
    </style>
</head>
<body class="min-h-screen pb-32">

    <div class="landscape-bg"></div>
    <div class="mountain"></div>

    <nav class="p-8 flex justify-between items-center no-print text-[#2c3e50]">
        <div class="flex items-center space-x-2">
            <span class="text-3xl font-black italic tracking-tighter">å±±æ°´ Â· è—å»Š</span>
        </div>
        <button onclick="toggleSettings(true)" class="w-12 h-12 flex items-center justify-center border border-black/10 rounded-full active:bg-black/5 transition-all">
            <span class="text-xl opacity-40">âš™ï¸</span>
        </button>
    </nav>

    <div id="settings-drawer" class="fixed inset-0 z-[100] no-print flex justify-end">
        <div class="absolute inset-0 bg-black/20 backdrop-blur-sm" onclick="toggleSettings(false)"></div>
        <div class="relative w-4/5 max-w-sm bg-[#f4f1ea] h-full p-10 shadow-2xl border-l border-black/5">
            <h2 class="text-2xl font-black mb-12">åƒæ•¸è¨­å®š</h2>
            <div class="space-y-8">
                <div><label class="text-xs font-bold text-slate-400 uppercase mb-3 block tracking-widest">å£“å…‹åŠ›å–®åƒ¹</label><input type="number" id="cfg-price-a" class="w-full p-2 outline-none"></div>
                <div><label class="text-xs font-bold text-slate-400 uppercase mb-3 block tracking-widest">PS å¡‘è† æ¿å–®åƒ¹</label><input type="number" id="cfg-price-b" class="w-full p-2 outline-none"></div>
                <div><label class="text-xs font-bold text-slate-400 uppercase mb-3 block tracking-widest">å¡ç´™å–®åƒ¹</label><input type="number" id="cfg-price-c" class="w-full p-2 outline-none"></div>
            </div>
            <button onclick="saveSettings()" class="w-full bg-[#2c3e50] text-white font-bold py-5 rounded-xl mt-16 shadow-xl uppercase tracking-widest text-xs">å„²å­˜ä¸¦è¿”å›</button>
        </div>
    </div>

    <main class="max-w-md mx-auto p-6 space-y-10">
        
        <div class="print-only text-center py-10">
            <h1 class="text-4xl font-black mb-2 italic">Quotation</h1>
            <p id="receipt-date" class="text-slate-400 text-xs tracking-widest uppercase font-bold"></p>
        </div>

        <section class="xuan-paper p-8 space-y-8 no-print">
            <div class="grid grid-cols-2 gap-8">
                <div class="col-span-1">
                    <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 block">é•·åº¦ (CM)</label>
                    <input type="number" id="length" inputmode="decimal" class="w-full text-2xl font-black p-2 outline-none">
                </div>
                <div class="col-span-1">
                    <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 block">å¯¬åº¦ (CM)</label>
                    <input type="number" id="width" inputmode="decimal" class="w-full text-2xl font-black p-2 outline-none">
                </div>
                <div class="col-span-2">
                    <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 block">æ¡†æ¢å–®åƒ¹</label>
                    <input type="number" id="framePrice" inputmode="decimal" class="w-full text-2xl font-black p-2 outline-none">
                </div>
            </div>
        </section>

        <section class="xuan-paper p-8 no-print">
            <div class="flex justify-between items-center mb-6">
                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">æˆäº¤æŠ˜æ‰£</span>
                <div class="flex items-center font-black">
                    <input type="number" id="discountInput" value="100" class="w-10 text-right text-xl !p-0">
                    <span class="text-sm ml-1">%</span>
                </div>
            </div>
            <input type="range" id="discountRange" min="30" max="100" value="100" step="5" class="ink-range">
        </section>

        <div class="space-y-6">
            <div class="print-only pb-10 text-center">
                <p id="receipt-spec" class="text-xl font-black text-slate-800 italic underline decoration-slate-200 underline-offset-8"></p>
            </div>

            <div class="solution-item border-b border-black/5 pb-4 flex justify-between items-end group">
                <div>
                    <h3 class="font-black text-lg text-[#2c3e50] group-receipt-text">æ¡†æ¢ + å£“å…‹åŠ›</h3>
                    <p class="text-[10px] text-slate-400 uppercase tracking-widest mt-1">Plan / A</p>
                </div>
                <div class="text-right">
                    <p id="old-1-2" class="text-[10px] text-slate-300 line-through font-bold mb-1"></p>
                    <p id="total-1-2" class="text-2xl font-black text-[#2c3e50] leading-none">$ 0</p>
                </div>
            </div>

            <div class="solution-item border-b border-black/5 pb-4 flex justify-between items-end group">
                <div>
                    <h3 class="font-black text-lg text-[#2c3e50] group-receipt-text">æ¡†æ¢ + PS å¡‘è† æ¿</h3>
                    <p class="text-[10px] text-slate-400 uppercase tracking-widest mt-1">Plan / B</p>
                </div>
                <div class="text-right">
                    <p id="old-1-3" class="text-[10px] text-slate-300 line-through font-bold mb-1"></p>
                    <p id="total-1-3" class="text-2xl font-black text-[#2c3e50] leading-none">$ 0</p>
                </div>
            </div>

            <div class="solution-item border-b border-black/5 pb-4 flex justify-between items-end group">
                <div>
                    <h3 class="font-black text-lg text-[#2c3e50] group-receipt-text">æ¡†æ¢ + è—è¡“å¡ç´™</h3>
                    <p class="text-[10px] text-slate-400 uppercase tracking-widest mt-1">Plan / C</p>
                </div>
                <div class="text-right">
                    <p id="old-1-4" class="text-[10px] text-slate-300 line-through font-bold mb-1"></p>
                    <p id="total-1-4" class="text-2xl font-black text-[#2c3e50] leading-none">$ 0</p>
                </div>
            </div>
        </div>

    </main>

    <div class="fixed bottom-10 left-1/2 -translate-x-1/2 w-full px-10 max-w-md no-print">
        <button onclick="toggleReceipt()" class="w-full py-5 bg-[#2c3e50] text-[#f4f1ea] font-black rounded-xl shadow-2xl active:scale-95 transition-all flex items-center justify-center space-x-3">
            <span id="btn-icon">ğŸ“„</span> <span id="btn-text" class="text-xs uppercase tracking-[0.2em]">è¼¸å‡ºå ±åƒ¹æ˜ç´°</span>
        </button>
    </div>

    <script>
        let config = { priceA: 150, priceB: 130, priceC: 200 };
        const loadSettings = () => {
            const saved = localStorage.getItem('gallery_config_zen');
            if(saved) config = JSON.parse(saved);
            document.getElementById('cfg-price-a').value = config.priceA;
            document.getElementById('cfg-price-b').value = config.priceB;
            document.getElementById('cfg-price-c').value = config.priceC;
        };
        const saveSettings = () => {
            config.priceA = parseFloat(document.getElementById('cfg-price-a').value) || 0;
            config.priceB = parseFloat(document.getElementById('cfg-price-b').value) || 0;
            config.priceC = parseFloat(document.getElementById('cfg-price-c').value) || 0;
            localStorage.setItem('gallery_config_zen', JSON.stringify(config));
            toggleSettings(false); calculate();
        };
        function toggleSettings(open) { document.getElementById('settings-drawer').classList.toggle('open', open); }

        const dom = {
            L: document.getElementById('length'), W: document.getElementById('width'), P: document.getElementById('framePrice'),
            dR: document.getElementById('discountRange'), dI: document.getElementById('discountInput'),
            tA: document.getElementById('total-1-2'), oA: document.getElementById('old-1-2'),
            tB: document.getElementById('total-1-3'), oB: document.getElementById('old-1-3'),
            tC: document.getElementById('total-1-4'), oC: document.getElementById('old-1-4'),
            rD: document.getElementById('receipt-date'), rS: document.getElementById('receipt-spec')
        };

        const calculate = () => {
            dom.dI.value = dom.dR.value;
            const L = parseFloat(dom.L.value) || 0; const W = parseFloat(dom.W.value) || 0; const P = parseFloat(dom.P.value) || 0;
            const disc = (parseFloat(dom.dI.value) || 0) / 100;
            if (L <= 0 || W <= 0) return;
            const frameBase = (L + W) * 2 * P; const area = L * W;
            const base = [frameBase + (area * config.priceA), frameBase + (area * config.priceB), frameBase + (area * config.priceC)];
            const fmt = (v) => `$ ${Math.round(v).toLocaleString()}`;
            [[dom.tA, dom.oA], [dom.tB, dom.oB], [dom.tC, dom.oC]].forEach((p, i) => {
                p[0].innerText = fmt(base[i] * disc); p[1].innerText = disc < 1 ? fmt(base[i]) : "";
            });
            dom.rS.innerText = `${L} Ã— ${W} CM / å–®åƒ¹ $${P}`;
        };

        function toggleReceipt() {
            const isR = document.body.classList.toggle('receipt-mode');
            document.getElementById('btn-text').innerText = isR ? "è¿”å›ä¿®æ”¹æ•¸æ“š" : "è¼¸å‡ºå ±åƒ¹æ˜ç´°";
            document.getElementById('btn-icon').innerText = isR ? "â†©" : "ğŸ“„";
            if(isR) {
                const now = new Date();
                dom.rD.innerText = now.toLocaleDateString('zh-TW', { year: 'numeric', month: 'long', day: 'numeric' });
                window.scrollTo(0,0);
            }
        }

        [dom.L, dom.W, dom.P, dom.dR].forEach(el => el.addEventListener('input', calculate));
        window.onload = loadSettings;
    </script>
</body>
</html>
